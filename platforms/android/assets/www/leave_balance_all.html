<!DOCTYPE HTML>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/splash/splash-icon.png">
<link rel="apple-touch-startup-image" href="images/splash/splash-screen.png"            media="screen and (max-device-width: 320px)" />  
<link rel="apple-touch-startup-image" href="images/splash/splash-screen@2x.png"         media="(max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 2)" /> 
<link rel="apple-touch-startup-image" sizes="640x1096" href="images/splash/splash-screen@3x.png" />
<link rel="apple-touch-startup-image" sizes="1024x748" href="images/splash/splash-screen-ipad-landscape" media="screen and (min-device-width : 481px) and (max-device-width : 1024px) and (orientation : landscape)" />
<link rel="apple-touch-startup-image" sizes="768x1004" href="images/splash/splash-screen-ipad-portrait.png" media="screen and (min-device-width : 481px) and (max-device-width : 1024px) and (orientation : portrait)" />
<link rel="apple-touch-startup-image" sizes="1536x2008" href="images/splash/splash-screen-ipad-portrait-retina.png"   media="(device-width: 768px)  and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)"/>
<link rel="apple-touch-startup-image" sizes="1496x2048" href="images/splash/splash-screen-ipad-landscape-retina.png"   media="(device-width: 768px) and (orientation: landscape)    and (-webkit-device-pixel-ratio: 2)"/>

<title>Netstratum HRM</title>

<link href="css/custom.css"           rel="stylesheet" type="text/css">
<link href="css/colors/black.css"     rel="stylesheet" type="text/css">
<link href="css/framework.css"       rel="stylesheet" type="text/css">
<link href="css/owl.carousel.css"     rel="stylesheet" type="text/css">
<link href="css/owl.theme.css"       rel="stylesheet" type="text/css">
<link href="css/swipebox.css"         rel="stylesheet" type="text/css">
<link href="css/colorbox.css"         rel="stylesheet" type="text/css">
<link href="css/dataTables.responsive.css"         rel="stylesheet" type="text/css">
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">

 
   <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jqueryui.js"></script>
<script type="text/javascript" src="js/owl.carousel.min.js"></script>
<script type="text/javascript" src="js/jquery.swipebox.js"></script>
<script type="text/javascript" src="js/colorbox.js"></script>
<script type="text/javascript" src="js/snap.js"></script>
<script type="text/javascript" src="js/contact.js"></script>
<script type="text/javascript" src="js/custom.js"></script>
<script type="text/javascript" src="js/framework.js"></script>
 <script src="js/jquery.validate.min.js" ></script>
<script type="text/javascript" src="js/framework.launcher.js"></script>
  <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<script type="text/javascript" src="http://cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="http://cdn.datatables.net/responsive/1.0.6/js/dataTables.responsive.js"></script>
<script type="text/javascript" src="http://cdn.datatables.net/plug-ins/1.10.7/pagination/four_button.js"></script>
<script type="text/javascript" src="PushNotification.js"></script>
  <script src="js/appconfig.js"></script>
</head>
<body>

<div id="preloader">
    <div id="status">
        <p class="center-text">
            Loading the content...
            <em>Loading depends on your connection speed!</em>
        </p>
    </div>
</div>


<div class="all-elements">
    <div id="sidebar" class="page-sidebar">
        <div class="page-sidebar-scroll">
            <div class="sidebar-controls">
                <a href="tel:04843193383" class="sidebar-call"></a>                
                
                <a href="#" class="sidebar-twit" id="logout_app"></a>
                <a href="#" class="sidebar-close"></a>
            </div>  
 
            <div class="sidebar-header">
                <img class="sidebar-logo round-decoration" src="images/general-nature/8s.jpg" alt="img" id="userprofimg">
                <h4 class="center-text" id="dispname"></h4>
                <em class="center-text">Welcome</em>
            </div>
            
            
            
           <div class="navigation-items" id="main-menu">
               <div class="nav-item">
                    <a href="dashboard_index.html" >Home</a>
                </div>
                 <div class="sidebar-decoration"></div>                                                          
                               
               
            </div>     
            
            
            
            <div id="home" style="display:none;" >
              <div id="app-status-div">
                <ul id="app-status-ul">

                </ul>
              </div>
            </div>
            
            
            <p class="sidebar-copyright center-text">Netstratum © 2015</p>
                    
        </div>
    </div>


    <div id="content" class="page-content">
        <div class="content-controls solid-color fixed-header">
            <a href="#" class="deploy-sidebar"></a>
            <a href="dashboard_index.html" class="for-dash"></a>
            <em class="content-title">ALL LEAVE BALANCE</em>
            <a href="mailto:hr@netstratum.com" class="deploy-contact"></a>
        </div>
      
        <div class="fixed-header-clear"></div>
      
        
       
        
 
     <div class="content content-height">
        <div class="one-half-responsive">
         <div class="container no-bottom">
          <div class="contact-form no-bottom"> 
         <h4></h4>
          <fieldset><div class="formFieldWrap"><input type="text" placeholder="Employee Name"  id="emp_name" name="emp_name" class="contactField" autocomplete="off">
         <input type="hidden" name="emp_num" id="emp_num">
           <select name="leave_year" id="leave_year" class="select-style">
                        
           </select></div></fieldset>
          
                            </div>
        </div>
        </div>
           
        
       
        
               
        
       
        <div class="one-half-responsive">
         <div class="container no-bottom">
          <div class="contact-form no-bottom"> 
        
         
            <table id="leavebalancetable_all" class="display no-wrap dataTable dtr-inline" cellspacing="0" width="100%" role="grid" style="width: 100%;" >
          
                                <thead>
                                    <tr>
                                        <th >Employee Name</th>
                                        <th >Leave Type</th>
                                        <th >Leave Number</th>
                                        <th>Leave Balance</th>
                                        <th >View Leaves</th>
                                    </tr>
                                </thead>
                            </table>
                            </div>
        </div>
        </div>
         
            </div>
        <div class="content">
            <div class="container">
                <div class="footer-socials">
                    <a href="https://www.facebook.com/netstratum" class="facebook-footer"></a>                    
                    <a href="https://twitter.com/netstratum" class="twitter-footer"></a>
                </div>
                   <p class="copyright uppercase center-text no-bottom">Netstratum © 2015<br> All rights reserved</p>     
            </div>
        </div>
    </div>  
</div>

</body>
</html>

<script type="text/javascript">
var employeeno = localStorage.getItem("empno");
var roleid = localStorage.getItem("roleid");
var username = localStorage.getItem("name");
var balance = '';




$(document).ready(function() {

getMenu('leave_balance_all');

     



if (roleid == 2)
{
    jQuery('#emp_num').val(employeeno);
    jQuery('#emp_name').val(username);


}else{

    jQuery('#emp_num').val('1');
    jQuery('#emp_name').val('Admin');
    
}


var d = new Date();
var n = d.getFullYear();
var year = '';
 for(year=2015;year<=n ;year++)   
 {             
    if (year == n)
                jQuery('#leave_year').append('<option selected="selected" value="'+year+'">'+year+'</option>');
    else
                 jQuery('#leave_year').append('<option  value="'+year+'">'+year+'</option>');

}


        
 balance =  $('#leavebalancetable_all').DataTable( {
         ajax:{
                 url:SITEURL+"index.php?r=Leave/Adminbalance_app",
                 
                data: function ( d ){

                    d.emp_name = jQuery('#emp_name').val();
                    d.leave_year = jQuery('#leave_year').val();
                    d.emp_num = jQuery('#emp_num').val();
                    
                   }
                },  
                   "serverSide": true,
                  "lengthChange": false,
                  "bInfo": false,
        responsive: true,
        "searching":false,
          "sPaginationType": "four_button"
    } );
    
  

   $('#leave_year,#emp_name').change(function(){
            
            if (jQuery('#emp_name').val() =='')
                jQuery('#emp_num').val('');

            balance.draw();
        });

   jQuery('#emp_name').autocomplete({
                source:SITEURL+"index.php?r=Leave/Employeelist_app",
                minLength: 2,
                select:function( event, ui ) {                        
                        jQuery('#emp_num').val(ui.item.id);
                          balance.draw();
                    }
         });


  

 $('#leavebalancetable_all').on('click','.balanceclass',function(event){
                  event.preventDefault();
                  myleaveid = $(this).attr('rel');
                  //jQuery.mobile.changePage( "#myleavestatus", {transition:"slideup"});
                  //balance.draw();
                    localStorage.setItem('leaveid', myleaveid);
                  if(jQuery('#emp_num').val()== employeeno)
                    location.href='myleave_status.html#leavestatus';
                else                
                    location.href='employee_status.html#leavestatus';
              });  

 
} );
</script>























